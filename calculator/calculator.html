<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculator</title>

    <link rel="stylesheet" href="light.css" id="theme">

    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

    <!-- font-awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css">
    
</head>
<body>
    <div id="calculator">
        <div class="time"></div>
        <div>
            <button id="mode">Light Mode üåô</button>
        </div>
        <div id="display"></div>
        <table>
            <tr>
                <td colspan="3"><button class="btn delete clean" style="width: 197px" >AC</button></td>
                <td><button class="btn option1 giaithua">a!</button></td>
            </tr>
            <tr>
                <td><button class="btn option1 square">a&#178;</button></td>
                <td><button class="btn option1 sqrt">&#x221a;</button></td>
                <td><button class="btn option1 percent">%</button></td>
                <td><button class="btn option multi" value="√ó">√ó</button></td>
            </tr>
            <tr>
                <td><button class="btn number" value="7">7</button></td>
                <td><button class="btn number" value="8">8</button></td>
                <td><button class="btn number" value="9">9</button></td>
                <td><button class="btn option divide" value="√∑">√∑</button></td>
            </tr>
            <tr>
                <td><button class="btn number" value="4">4</button></td>
                <td><button class="btn number" value="5">5</button></td>
                <td><button class="btn number" value="6">6</button></td>
                <td><button class="btn option plus" value="+">+</button></td>
            </tr>
            <tr>
                <td><button class="btn number" value="1">1</button></td>
                <td><button class="btn number" value="2">2</button></td>
                <td><button class="btn number" value="3">3</button></td>
                <td><button class="btn option minus" value="-">-</button></td>
            </tr>
            <tr>
                <td><button class="btn delete undo"><i style="font-size: 22px;" class="material-icons">backspace</i></button></td>
                <td><button class="btn number" value="0">0</button></td>
                <td><button class="btn delete dot" value=".">.</button></td>
                <td><button class="btn equal">=</button></td>
            </tr>
        </table>
    </div>

    <!-- Jquery -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

    <script>
        //Khi m·ªõi load trang xong, v√¨ ch∆∞a c√≥ s·ªë n√†o tr√™n m√†n h√¨nh n√™n s·∫Ω kh√¥ng ·∫•n ƒë∆∞·ª£c d·∫•u "x", "√∑", "="
        $(function(){
            $('.multi').attr('disabled',true);
            $('.divide').attr('disabled',true);
            $('.equal').attr('disabled',true);
        });

        //Th·ª±c hi·ªán c√°c h√†nh ƒë·ªông b√™n trong khi ·∫•n v√†o c√°c n√∫t s·ªë, ph√©p t√≠nh, d·∫•u '.'
        $('.number, .option, .dot').on('click', function(){
            char = $(this).html(); //L·∫•y gi√° tr·ªã v·ª´a click
            result = $('#display').html(); //L·∫•y chu·ªói gi√° tr·ªã trong √¥ ph√©p t√≠nh
            $('#display').html(result + char); //Th√™m gi√° tr·ªã v·ª´a click v√†o √¥ gi√° tr·ªã hi·ªán t·∫°i
            $('.equal').removeAttr('disabled'); //b·ªè v√¥ hi·ªáu h√≥a d·∫•u =
            $('.option').removeAttr('disabled'); //b·ªè v√¥ hi·ªáu h√≥a ph√©p to√°n
        });

        //Khi click v√†o d·∫•u x th√¨ s·∫Ω kh√¥ng click ti·∫øp d·∫•u x n·ªØa, c≈©ng ko click ƒëc d·∫•u "√∑"
        $('.multi').on('click', function(){
            $('.multi').attr('disabled',true);
            $('.divide').attr('disabled',true);
        });

        //T∆∞∆°ng t·ª± b√™n tr√™n
        $('.divide').on('click',function(){
            $('.divide').attr('disabled',true);
            $('.multi').attr('disabled',true);
        });

        //Khi ·∫•n n√∫t AC th√¨ √¥ gi√° tr·ªã s·∫Ω hi·ªán r·ªóng
        $('.clean').on('click', function(){
            $('#display').html("");
        });

        //Khi ·∫•n n√∫t x√≥a, s·∫Ω x√≥a t·ª´ng ph·∫ßn t·ª≠ 1
        $('.undo').on('click', function(){
            result = $('#display').html();
            $('#display').html(result.substring(0, result.length - 1));
        });

        //Th·ª±c hi·ªán ph√©p t√≠nh %
        $('.percent').on('click', function(){
            result = $('#display').html();
            $('#display').html(result / 100);
        });

        //Th·ª±c hi·ªán ph√©p t√≠nh m≈© 2
        $('.square').on('click', function(){
            result = $('#display').html();
            if(result == ''){
                $('#display').html(0);
            }else{
               $('#display').html(result * result); 
            }
        });

        //Th·ª±c hi·ªán ph√©p t√≠nh cƒÉn b·∫≠c 2
        $('.sqrt').on('click',function(){
            result = $('#display').html();
            $('#display').html(Math.sqrt(result)); 
        });


        //Th·ª±c hi·ªán ph√©p t√≠nh giai th·ª´a
        $('.giaithua').on('click',function(){
            result = $('#display').html();
            if(result < 0){
                $('#display').html('Error!');
            }else if(result == 0){
                $('#display').html(1);
            }else{
                let res = 1;
                for (let i = 1; i <= result; i++) {
                    res = res * i;
                }
                $('#display').html(res);
            }
        })

        //Th·ª±c thi k·∫øt qu·∫£ trong √¥ gi√° tr·ªã, thay th·∫ø x = *, √∑ = /
        $('.equal').on('click', function(){
            result = $('#display').html();
            result = result.replaceAll("√ó" , "*");
            result = result.replaceAll("√∑" , "/");
            $('#display').html(eval(result));
        });

        //Thay ƒë·ªïi theme 
        $('#mode').click(function(){

            if ($('#theme').attr("href") == "light.css")
            {
                $('#theme').attr("href","dark.css");
                $('#mode').html("Dark Mode üåô");
            }
            else if($('#theme').attr("href") == "dark.css")
            {
                $('#theme').attr("href","light.css");
                $('#mode').html("Light Mode üåô");
            }
        });

        //Set th·ªùi gian
        $(function setTime(){
            let clock = new Date();
            if (clock.getMinutes() < 10){
                $('.time').html(clock.getHours() + " : " + "0" + clock.getMinutes());
            }else if (clock.getMinutes() == 0){
                $('.time').html(clock.getHours() + " : 00");
            }else{
                $('.time').html(clock.getHours() + " : " + clock.getMinutes());
            }
            setTimeout(setTime,1000);
        });
        
    </script>
</body>
</html>