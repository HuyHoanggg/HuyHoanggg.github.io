<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculator</title>

    <link rel="stylesheet" href="light.css" id="theme">

    <!-- Jquery -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

    
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

    <!-- font-awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css">
    
</head>
<body>
    <div id="calculator">
        <div>
            <button id="mode" onclick="switchTheme()">Light Mode ðŸŒ™</button>
        </div>
        <div id="display"></div>
        <table>
            <tr>
                <td colspan="3"><button class="btn delete clean" style="width: 197px" >AC</button></td>
                <td><button class="btn option1 giaithua">a!</button></td>
            </tr>
            <tr>
                <td><button class="btn option1 square">a&#178;</button></td>
                <td><button class="btn option1 sqrt">&#x221a;</button></td>
                <td><button class="btn option1 percent">%</button></td>
                <td><button class="btn option multi" value="Ã—">Ã—</button></td>
            </tr>
            <tr>
                <td><button class="btn number" value="7">7</button></td>
                <td><button class="btn number" value="8">8</button></td>
                <td><button class="btn number" value="9">9</button></td>
                <td><button class="btn option divide" value="Ã·">Ã·</button></td>
            </tr>
            <tr>
                <td><button class="btn number" value="4">4</button></td>
                <td><button class="btn number" value="5">5</button></td>
                <td><button class="btn number" value="6">6</button></td>
                <td><button class="btn option plus" value="+">+</button></td>
            </tr>
            <tr>
                <td><button class="btn number" value="1">1</button></td>
                <td><button class="btn number" value="2">2</button></td>
                <td><button class="btn number" value="3">3</button></td>
                <td><button class="btn option minus" value="-">-</button></td>
            </tr>
            <tr>
                <td><button class="btn delete undo"><i style="font-size: 22px;" class="material-icons">backspace</i></button></td>
                <td><button class="btn number" value="0">0</button></td>
                <td><button class="btn delete dot" value=".">.</button></td>
                <td><button class="btn equal">=</button></td>
            </tr>
        </table>
    </div>
    <script>

        $(function(){
            $('table button.multi').attr('disabled',true);
            $('table button.divide').attr('disabled',true);
            $('table button.equal').attr('disabled',true);
        });

        $('table button.number, table button.option, table button.dot').on('click', function(){
            char = $(this).html();
            result = $('#calculator #display').html();
            $('#calculator #display').html(result + char);
            $('table button.equal').removeAttr('disabled');
            $('table button.option').removeAttr('disabled');
        });

        $('table button.multi').on('click', function(){
            $('table button.multi').attr('disabled',true);
            $('table button.divide').attr('disabled',true);
        });

        $('table button.divide').on('click',function(){
            $('table button.divide').attr('disabled',true);
            $('table button.multi').attr('disabled',true);
        });

        $('table button.clean').on('click', function(){
            $('#calculator #display').html("");
        });

        $('table button.undo').on('click', function(){
            result = $('#calculator #display').html();
            $('#calculator #display').html(result.substring(0, result.length - 1));
        });

        $('table button.percent').on('click', function(){
            result = $('#calculator #display').html();
            $('#calculator #display').html(result / 100);
        });

        $('table button.square').on('click', function(){
            result = $('#calculator #display').html();
            if(result == ''){
                $('#calculator #display').html(0);
            }else{
               $('#calculator #display').html(result * result); 
            }
        });

        $('table button.sqrt').on('click',function(){
            result = $('#calculator #display').html();
            $('#calculator #display').html(Math.sqrt(result)); 
        });

        $('table button.giaithua').on('click',function(){
            result = $('#calculator #display').html();
            if(result < 0){
                $('#calculator #display').html('Error!');
            }else if(result == 0){
                $('#calculator #display').html(1);
            }else{
                let res = 1;
                for (let i = 1; i <= result; i++) {
                    res = res * i;
                }
                $('#calculator #display').html(res);
            }
        })

        $('table button.equal').on('click', function(){
            result = $('#calculator #display').html();
            result = result.replaceAll("Ã—" , "*");
            result = result.replaceAll("Ã·" , "/");
            $('#calculator #display').html(eval(result));
        });

        function switchTheme() {
            let mode = document.getElementById("mode");
            let theme = document.getElementById("theme");
            if (theme.getAttribute("href") == "light.css") {
                theme.href = "dark.css";
                mode.innerHTML = "Dark Mode ðŸŒ™";
            } else {
                theme.href = "light.css";
                mode.innerHTML = "Light Mode ðŸŒ™";
            }
        }

        // $('#calculator button#mode').on('click',function(){
        //     mode = $('#mode').html();
        //     theme = $('#theme');
        //     if (theme.getAttribute("href") == "light.css"){
        //         theme.href = "dark.css";
        //         $('#mode').html("Dark Mode ðŸŒ™");
        //     }else{
        //         theme.href = "light.css";
        //         $('#mode').html("Light Mode ðŸŒ™");
        //     }
        // });
    </script>
</body>
</html>